{"ts":1366596833939,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"$('.home.index').ready(function() {\n  console.log(\"Page-specific JavaScript on the home.index page.\");\n});\n\n$('.registrations.new').ready(function() {\n  console.log(\"Page-specific JavaScript on the registrations.new page.\");\n});\n\n$('.registrations').ready(function() {\n  $.externalScript('https://js.stripe.com/v1/').done(function(script, textStatus) {\n    console.log('Script loading: ' + textStatus );\n    if (typeof Stripe != 'undefined') {\n      console.log('Okay. Stripe file loaded.');\n    }\n    else\n    {\n      console.log('Problem. Stripe file not loaded.');\n    }\n  });\n});"]],"start1":0,"start2":0,"length1":0,"length2":583}]],"length":583}
{"contributors":[],"silentsave":false,"ts":1366596856244,"patch":[[{"diffs":[[0,"$('."],[-1,"home.index"],[1,"registrations"],[0,"').ready"]],"start1":0,"start2":0,"length1":22,"length2":25},{"diffs":[[0,"{\n  "],[-1,"console.log(\"Page-specific JavaScript on the home.index page.\");\n});\n\n$('.registrations.new').ready"],[1,"$.externalScript('https://js.stripe.com/v1/').done(function(script, textStatus) {\n    if (typeof Stripe != 'undefined') {\n      console.log('Stripe JavaScript file loaded.');\n    }\n    else\n    {\n      console.log('Problem: Stripe JavaScript file not loaded.');\n    }\n    Stripe.setPublishableKey($('meta[name=\"stripe-key\"]').attr('content'));\n    console.log('set Stripe public key: ' + $('meta[name=\"stripe-key\"]').attr('content'));\n    var subscription = {\n      setupForm: function() {\n        console.log('function: setupForm')\n        return $('.card_form').submit"],[0,"(fun"]],"start1":37,"start2":37,"length1":107,"length2":578},{"diffs":[[0,"ion() {\n"],[1,"        "],[0,"  consol"]],"start1":617,"start2":617,"length1":16,"length2":24},{"diffs":[[0,"log("],[-1,"\"Page-specific JavaS"],[1,"'setupForm: form submitted')\n          $('input[type=submit]').prop('disabled', true);\n          subs"],[0,"cript"],[-1," on the registrations.new page.\");\n});\n\n$('.registrations').ready(function() {\n  $.externalScript('https://js.stripe.com/v1/').done(function(script, textStatus"],[1,"ion.processCard();\n          return false;\n        });\n      },\n      processCard: function() {\n        console.log('function: processCard');\n        var card;\n        card = {\n          name: $('#user_name').val(),\n          number: $('#card_number').val(),\n          cvc: $('#card_code').val(),\n          expMonth: $('#card_month').val(),\n          expYear: $('#card_year').val()\n        };\n        return Stripe.createToken(card, subscription.handleStripeResponse);\n      },\n      handleStripeResponse: function(status, response"],[0,") {\n"],[1,"    "],[0,"    "]],"start1":643,"start2":643,"length1":196,"length2":653},{"diffs":[[0,"og('"],[-1,"Script loading: ' + textStatus );\n    if (typeof Stripe != 'undefined') {\n      console.log('Okay. Stripe file loaded.'"],[1,"function: handleStripeResponse');\n        if (status === 200) {\n          return alert('Stripe response: ' + response.id"],[0,");\n    "],[-1,"}\n"],[0,"   "],[1," }"],[0," else"],[1," {"],[0,"\n    "],[-1,"{\n"],[0,"      "],[-1,"console.log('Problem. Stripe file not loaded.');\n    }"],[1,"return alert('Stripe response: ' + response.error.message);\n        }\n      }\n    };\n    return subscription.setupForm();"],[0,"\n  }"]],"start1":1305,"start2":1305,"length1":211,"length2":279}]],"length":1590,"saved":false}
{"ts":1366597144028,"patch":[[{"diffs":[[0,"    "],[-1,"if (typeof Stripe != 'undefined') {\n      console.log('Stripe JavaScript file loaded.');\n    }\n    else\n    {\n      console.log('Problem: Stripe JavaScript file not loaded.');\n    }\n    Stripe.setPublishableKey($('meta[name=\"stripe-key\"]').attr('content'));\n    console.log('set Stripe public key: ' + $('meta[name=\"stripe-key\"]').attr('content'));\n"],[1,"  Stripe.setPublishableKey($('meta[name=\"stripe-key\"]').attr('content'));\n  "],[0,"    "]],"start1":123,"start2":123,"length1":357,"length2":84},{"diffs":[[0,"ription = {\n"],[1,"  "],[0,"      setupF"]],"start1":216,"start2":216,"length1":24,"length2":26},{"diffs":[[0,"{\n  "],[-1,"      console.log('function: setupForm')\n"],[0,"    "]],"start1":258,"start2":258,"length1":49,"length2":8},{"diffs":[[0,"{\n  "],[-1,"        console.log('setupForm: form submitted')\n"],[0,"    "]],"start1":311,"start2":311,"length1":57,"length2":8},{"diffs":[[0,"ed', true);\n"],[1,"            if ($('#card_number').length) {\n    "],[0,"          su"]],"start1":361,"start2":361,"length1":24,"length2":72},{"diffs":[[0,"Card();\n"],[1,"    "],[0,"        "]],"start1":451,"start2":451,"length1":16,"length2":20},{"diffs":[[0," false;\n"],[1,"            } else {\n              return true;\n            }\n  "],[0,"        "]],"start1":479,"start2":479,"length1":16,"length2":80},{"diffs":[[0,"    });\n"],[1,"  "],[0,"      },"]],"start1":555,"start2":555,"length1":16,"length2":18},{"diffs":[[0,"\n        },\n"],[1,"  "],[0,"      proces"]],"start1":562,"start2":562,"length1":24,"length2":26},{"diffs":[[0,"{\n  "],[-1,"      console.log('function: processCard');\n"],[0,"    "]],"start1":606,"start2":606,"length1":52,"length2":8},{"diffs":[[0,"r card;\n"],[1,"  "],[0,"        "]],"start1":620,"start2":620,"length1":16,"length2":18},{"diffs":[[0,"        "],[1,"  "],[0,"name: $("]],"start1":649,"start2":649,"length1":16,"length2":18},{"diffs":[[0,"r_name').val(),\n"],[1,"  "],[0,"          number"]],"start1":672,"start2":672,"length1":32,"length2":34},{"diffs":[[0,"        "],[1,"  "],[0,"cvc: $('"]],"start1":735,"start2":735,"length1":16,"length2":18},{"diffs":[[0,"        "],[1," "],[1," "],[0,"expMonth"]],"start1":775,"start2":775,"length1":16,"length2":18},{"diffs":[[0,"_month').val(),\n"],[1,"  "],[0,"          expYea"]],"start1":803,"start2":803,"length1":32,"length2":34},{"diffs":[[0,"l()\n        "],[1,"  "],[0,"};\n        r"]],"start1":858,"start2":858,"length1":24,"length2":26},{"diffs":[[0," };\n        "],[1," "],[1," "],[0,"return Strip"]],"start1":871,"start2":871,"length1":24,"length2":26},{"diffs":[[0,"nse);\n      "],[1,"  "],[0,"},\n"],[1,"  "],[0,"      handle"]],"start1":947,"start2":947,"length1":27,"length2":31},{"diffs":[[0,"    "],[-1,"console.log('function: handleStripeResponse');\n        if (status === 200) {\n          return alert('Stripe response: ' + response.id);\n        } else {\n          return alert('Stripe response: ' + response.error.message);\n"],[1,"  if (status === 200) {\n            $('#user_stripe_token').val(response.id)\n            $('.card_form')[0].submit()\n          } else {\n            $('#stripe_error').text(response.error.message).show();\n            return $('input[type=submit]').prop('disabled', false);\n  "],[0,"    "]],"start1":1027,"start2":1027,"length1":231,"length2":282},{"diffs":[[0,"    "],[1,"  "],[0,"}\n    "],[1," "],[1," "],[0,"};\n"],[1,"  "],[0,"    "]],"start1":1317,"start2":1317,"length1":17,"length2":23}]],"length":1382,"saved":false}
